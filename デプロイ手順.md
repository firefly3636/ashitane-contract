# あした音 契約書類生成 - GitHub経由でCloudflare Pagesにデプロイする手順

このガイドでは、契約書類生成アプリをGitHubにアップロードし、Cloudflare Pagesで公開する手順を説明します。

---

## 前提条件

- GitHubアカウント（[github.com](https://github.com) で無料登録）
- Cloudflareアカウント（[dash.cloudflare.com](https://dash.cloudflare.com) で無料登録）
- Gitがインストールされていること（[git-scm.com](https://git-scm.com) からダウンロード可能）

---

## ステップ1: GitHubにリポジトリを作成する

1. **GitHubにログイン**して、右上の **+** をクリック → **New repository** を選択

2. **リポジトリの設定**
   - **Repository name**: `ashita-oto-contract`（任意の名前でOK）
   - **Description**: 「あした音 契約書類 自動生成システム」（任意）
   - **Public** を選択
   - **Add a README file** はチェックしない（既にフォルダにファイルがあるため）
   - **Create repository** をクリック

3. 作成後、表示されるURL（例: `https://github.com/あなたのユーザー名/ashita-oto-contract`）をメモしておく

---

## ステップ2: ローカルのフォルダをGitHubにpushする

### 2-1. ターミナル（PowerShell）を開く

Windowsの場合：
- スタートメニューで「PowerShell」と入力して開く
- または、エクスプローラーで `C:\Users\ashit\contract-editor` を開き、アドレスバーに `powershell` と入力してEnter

### 2-2. フォルダに移動する

```powershell
cd C:\Users\ashit\contract-editor
```

### 2-3. Gitリポジトリを初期化（まだの場合）

```powershell
git init
```

### 2-4. すべてのファイルを追加する

```powershell
git add .
```

### 2-5. 初回コミットを作成する

```powershell
git commit -m "初回コミット: あした音 契約書類生成アプリ"
```

### 2-6. メインブランチの名前を設定する

```powershell
git branch -M main
```

### 2-7. GitHubのリポジトリをリモートとして追加する

**※ `あなたのユーザー名` と `ashita-oto-contract` を、実際のGitHubユーザー名とリポジトリ名に置き換えてください**

```powershell
git remote add origin https://github.com/あなたのユーザー名/ashita-oto-contract.git
```

### 2-8. GitHubにpushする

```powershell
git push -u origin main
```

- **初回のみ**、GitHubのユーザー名とパスワード（またはPersonal Access Token）の入力が求められます
- パスワードの代わりに **Personal Access Token** を使う場合：
  1. GitHub → Settings → Developer settings → Personal access tokens
  2. 「Generate new token」でトークンを作成
  3. そのトークンをパスワード欄に入力

---

## ステップ3: Cloudflare Pagesでプロジェクトを作成する

1. **Cloudflareにログイン**して [dash.cloudflare.com](https://dash.cloudflare.com) を開く

2. 左メニューから **Workers & Pages** をクリック

3. **Create** ボタンをクリック → **Pages** を選択

4. **Connect to Git** をクリック

5. **GitHub** を選択し、表示される **Connect GitHub** をクリック

6. GitHubの認証画面で **Authorize Cloudflare** を許可する

7. **リポジトリを選択**
   - 一覧から `ashita-oto-contract`（または作成したリポジトリ名）を選択
   - **Begin setup** をクリック

---

## ステップ4: ビルド設定を行う

1. **Project name**: `ashita-oto-contract`（そのままでOK、または任意の名前）

2. **Production branch**: `main` のまま

3. **Build settings**（重要）
   - **Framework preset**: `None` を選択
   - **Build command**: **空欄のまま**（何も入力しない）
   - **Build output directory**: `/` を入力（ルートディレクトリ）

4. **Environment variables**: そのままでOK（追加不要）

5. **Save and Deploy** をクリック

---

## ステップ5: デプロイ完了を待つ

- 数十秒〜1分ほどでデプロイが完了します
- 完了すると、**Your site is live** と表示され、URL（例: `https://ashita-oto-contract.pages.dev`）が表示されます
- そのURLをクリックして、アプリが正しく表示されるか確認してください

---

## 今後の更新方法

アプリを修正した場合、同じフォルダで以下を実行すると更新が反映されます：

```powershell
cd C:\Users\ashit\contract-editor
git add .
git commit -m "更新内容の説明"
git push
```

Cloudflare Pagesは自動的に再デプロイされ、数分以内に変更が反映されます。

---

## トラブルシューティング

### push時にエラーが出る場合
- GitHubの認証（ユーザー名・トークン）が正しいか確認
- リモートURLが正しいか確認: `git remote -v`

### デプロイ後にページが表示されない場合
- Build output directory が `/` になっているか確認
- ブラウザのキャッシュを削除して再読み込み

### テンプレートの読み込みに失敗する場合
- `templates` フォルダに3つのファイル（docx×2、xlsx×1）が含まれているか確認
- `git add .` で全ファイルが追加されているか確認: `git status`
